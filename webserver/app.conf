server
{

  server_name collections.bioatlas.se;

  proxy_set_header Host $host;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header X-Forwarded-Host $server_name;
  proxy_set_header X-Forwarded-Proto https;
  proxy_redirect off;
  port_in_redirect off;

  location /
  {

    add_header Access-Control-Allow-Origin *;
    proxy_pass http://collectory:8080;
  }
}
server
{

  server_name records.bioatlas.se;

  proxy_set_header Host $host;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header X-Forwarded-Host $server_name;
  proxy_set_header X-Forwarded-Proto https;
  proxy_redirect off;
  port_in_redirect off;

  location /ws/webportal/wms/reflect
  {

    proxy_pass http://biocacheservice:8080/ws/webportal/wms/reflect;
  }
  location /ws/ogc/wms/reflect
  {

    proxy_pass http://biocacheservice:8080/ws/ogc/wms/reflect;
  }
  location /ws/mapping/wms/reflect
  {

    proxy_pass http://biocacheservice:8080/ws/mapping/wms/reflect;
  }
  location /ws/mapping/wms/image
  {

    proxy_pass http://biocacheservice:8080/ws/mapping/wms/image;
  }
  location /ws/webportal/wms/image
  {

    proxy_pass http://biocacheservice:8080/ws/webportal/wms/image;
  }
  location /ws/explore
  {

    proxy_pass http://biocacheservice:8080/ws/explore;
  }
  location /ws/images/taxon
  {

    proxy_pass http://biocacheservice:8080/ws/images/taxon;
  }
  location /ws/mapping/legend
  {

    proxy_pass http://biocacheservice:8080/ws/mapping/legend;
  }
  location /ws/occurrence/facets
  {

    proxy_pass http://biocacheservice:8080/ws/occurrence/facets;
  }
  location /ws/occurrence/groups
  {

    proxy_pass http://biocacheservice:8080/ws/occurrence/groups;
  }
  location /ws/occurrence/legend
  {

    proxy_pass http://biocacheservice:8080/ws/occurrence/legend;
  }
  location /ws/occurrences/legend
  {

    proxy_pass http://biocacheservice:8080/ws/occurrences/legend;
  }
  location /ws/occurrences/taxaCount
  {

    proxy_pass http://biocacheservice:8080/ws/occurrences/taxaCount;
  }
  location /ws/search/facets
  {

    proxy_pass http://biocacheservice:8080/ws/search/facets;
  }
  location /ws/search/grouped/facets
  {

    proxy_pass http://biocacheservice:8080/ws/search/grouped/facets;
  }
  location /ws/webportal/legend
  {

    proxy_pass http://biocacheservice:8080/ws/webportal/legend;
  }
  location /ws/density/legend
  {

    proxy_pass http://biocacheservice:8080/ws/density/legend;
  }
  location /ws/density/map
  {

    proxy_pass http://biocacheservice:8080/ws/density/map;
  }
  location /ws/occurrences/static
  {

    proxy_pass http://biocacheservice:8080/ws/occurrences/static;
  }
  location /ws/assertions/codes
  {

    proxy_pass http://biocacheservice:8080/ws/assertions/codes;
  }
  location /ws/assertions/user/codes
  {

    proxy_pass http://biocacheservice:8080/ws/assertions/user/codes;
  }
  location /ws/chart
  {

    proxy_pass http://biocacheservice:8080/ws/chart;
  }
  location /ws/mapping/bbox
  {

    proxy_pass http://biocacheservice:8080/ws/mapping/bbox;
  }
  location /ws/mapping/bounds
  {

    proxy_pass http://biocacheservice:8080/ws/mapping/bounds;
  }
  location /ws/mapping/params
  {

    proxy_pass http://biocacheservice:8080/ws/mapping/params;
  }
  location /ws/mapping/qid
  {

    proxy_pass http://biocacheservice:8080/ws/mapping/qid;
  }
  location /ws/occurrences/index/download
  {

    proxy_pass http://biocacheservice:8080/ws/occurrences/index/download;
  }
  location /ws/occurrences/offline
  {

    proxy_pass http://biocacheservice:8080/ws/occurrences/offline;
  }
  location /ws/qid
  {

    proxy_pass http://biocacheservice:8080/ws/qid;
  }
  location /ws/webportal/bbox
  {

    proxy_pass http://biocacheservice:8080/ws/webportal/bbox;
  }
  location /ws/webportal/bounds
  {

    proxy_pass http://biocacheservice:8080/ws/webportal/bounds;
  }
  location /ws/webportal/dataProviders
  {

    proxy_pass http://biocacheservice:8080/ws/webportal/dataProviders;
  }
  location /ws/webportal/params
  {

    proxy_pass http://biocacheservice:8080/ws/webportal/params;
  }
  location /ws/biocache-download
  {

    alias /data/biocache-download;
  }
  location /ws
  {

    add_header Access-Control-Allow-Origin *;
    proxy_pass http://biocacheservice:8080/ws;
  }

  location /
  {

    add_header Access-Control-Allow-Origin *;
    proxy_pass http://biocachehub:8080;
  }
}
server
{

  server_name logger.bioatlas.se;

  proxy_set_header Host $host;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header X-Forwarded-Host $server_name;
  proxy_set_header X-Forwarded-Proto https;
  proxy_redirect off;
  port_in_redirect off;

  location /
  {

    add_header Access-Control-Allow-Origin *;
    proxy_pass http://loggerservice:8080;
  }

}
server
{

  server_name images.bioatlas.se;

  proxy_set_header Host $host;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header X-Forwarded-Host $server_name;
  proxy_set_header X-Forwarded-Proto https;
  proxy_redirect off;
  port_in_redirect off;

  location /store/
  {

    add_header Access-Control-Allow-Origin *;
    proxy_pass http://imagestore/;
  }

  location /
  {

    add_header Access-Control-Allow-Origin *;
    proxy_pass http://imageservice:8080;
  }
}
server
{

  server_name species.bioatlas.se;

  proxy_set_header Host $host;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header X-Forwarded-Host $server_name;
  proxy_set_header X-Forwarded-Proto https;
  proxy_redirect off;
  port_in_redirect off;

  location /ws
  {

    add_header Access-Control-Allow-Origin *;
    proxy_pass http://bieindex:8080/ws;
  }

  location /
  {

    add_header Access-Control-Allow-Origin *;
    proxy_pass http://biehub:8080;
  }
}
server
{

  server_name api.bioatlas.se;

  proxy_set_header Host $host;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header X-Forwarded-Host $server_name;
  proxy_set_header X-Forwarded-Proto https;
  proxy_redirect off;
  port_in_redirect off;

  location /
  {

    add_header Access-Control-Allow-Origin *;
    proxy_pass http://apiservice:8080;
  }

}
server
{

  server_name lists.bioatlas.se;

  proxy_set_header Host $host;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header X-Forwarded-Host $server_name;
  proxy_set_header X-Forwarded-Proto https;
  proxy_redirect off;
  port_in_redirect off;

  location /
  {

    add_header Access-Control-Allow-Origin *;
    proxy_pass http://specieslists:8080;
  }

}
server
{

  server_name sds.bioatlas.se;

  proxy_set_header Host $host;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header X-Forwarded-Host $server_name;
  proxy_set_header X-Forwarded-Proto https;
  proxy_redirect off;
  port_in_redirect off;

  location /
  {

    add_header Access-Control-Allow-Origin *;
    proxy_pass http://sds:8080;
  }
}
server
{

  server_name regions.bioatlas.se;

  proxy_set_header Host $host;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header X-Forwarded-Host $server_name;
  proxy_set_header X-Forwarded-Proto https;
  proxy_redirect off;
  port_in_redirect off;

  location /
  {

    add_header Access-Control-Allow-Origin *;
    proxy_pass http://regions:8080;
  }
}
server
{

  server_name spatial.bioatlas.se;

  proxy_set_header Host $host;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header X-Forwarded-Host $server_name;
  proxy_set_header X-Forwarded-Proto https;
  proxy_redirect off;
  port_in_redirect off;

  location /alaspatial
  {

    add_header Access-Control-Allow-Origin *;
    proxy_pass http://spatialservice:8080/ws;
  }
  location /files
  {

    alias /data/ala/runtime/files/;
  }
  location /geoserver
  {

    add_header Access-Control-Allow-Origin *;
    proxy_pass http://geoserver:8080/geoserver;
  }
  location /layers-service
  {

    add_header Access-Control-Allow-Origin *;
    proxy_pass http://spatialservice:8080/ws;
  }
  location /layers
  {

    return 301 /ws/layers/index;
  }
  location /layers/more
  {

    return 301 /ws/view/more;
  }
  location /webportal
  {

    return 301 /;
  }

  location /ws
  {

    add_header Access-Control-Allow-Origin *;
    proxy_pass http://spatialservice:8080/ws;
  }

  location /
  {

    add_header Access-Control-Allow-Origin *;
    proxy_pass http://spatialhub:8080;
  }

}
server
{

  server_name static.bioatlas.se;

  proxy_set_header Host $host;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header X-Forwarded-Host $server_name;
  proxy_set_header X-Forwarded-Proto https;
  proxy_redirect off;
  port_in_redirect off;

  location /
  {

    add_header Access-Control-Allow-Origin *;
    proxy_pass http://static;
  }

}
server
{
  server_name bioatlas.se;

  proxy_set_header Host $host;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header X-Forwarded-Host $server_name;
  proxy_set_header X-Forwarded-Proto https;
  proxy_redirect off;
  port_in_redirect off;

  location /solr
  {
		add_header Access-Control-Allow-Origin *;
		proxy_pass http://solr:8983;
  }

  location /
  {
    add_header Access-Control-Allow-Origin *;
    proxy_pass http://wordpress:80;
  }
}

server
{
  server_name auth.bioatlas.se;

  proxy_set_header Host $host;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header X-Forwarded-Host $server_name;
  proxy_set_header X-Forwarded-Proto https;
  proxy_redirect off;
  port_in_redirect off;
  proxy_headers_hash_max_size 512;
  proxy_headers_hash_bucket_size 128;

  location /cas
  {
    add_header Access-Control-Allow-Origin *;
    proxy_pass http://casserver:8080/cas;
  }

  location /userdetails
  {
    add_header Access-Control-Allow-Origin *;
    proxy_pass http://userdetails:8080/userdetails;
  }


  location /apikey
  {
    add_header Access-Control-Allow-Origin *;
    proxy_pass http://apikey:8080/apikey;
  }

  location /
  {
    add_header Access-Control-Allow-Origin *;
    proxy_pass http://casserver:8080/cas;
  }
}
